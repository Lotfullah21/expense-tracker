{% extends "base.html" %} {% block start %}

<h1 class="text-3xl font-bold text-center my-6">Expense Tracker</h1>

<div class="container mx-auto px-4">
	<a
		href="{% url 'logout_view' %}"
		class="btn bg-blue-500 text-white p-2 rounded hover:bg-blue-600 transition inline-block mb-4 pointer"
		>logout</a
	>
	{{request.usery}}
	<div class="header flex items-center mb-6">
		<img
			src="https://i.ibb.co/jfScDTC/budget.png"
			alt="Expense Tracker"
			class="w-24 h-24 mb-4" />
		<div class="balance-container text-center">
			<h2 class="text-lg font-semibold">Your Balance</h2>
			<h2 id="balance" class="text-2xl font-bold text-green-600">
				{{ currentBalance }}
			</h2>
		</div>
	</div>
	<div class="inc-exp-container flex justify-between mb-6">
		<div class="income w-1/2 bg-green-100 p-4 rounded shadow">
			<h4 class="font-semibold">Income</h4>
			<p id="money-plus" class="money plus text-green-600 font-bold">
				{{ creditedAmount }}
			</p>
		</div>
		<div class="expenses w-1/2 bg-red-100 p-4 rounded shadow">
			<h4 class="font-semibold">Expenses</h4>
			<p id="money-minus" class="money minus text-red-600 font-bold">
				{{ debitedAmount }}
			</p>
		</div>
	</div>
	<h3 class="text-lg font-semibold mb-2">History</h3>
	<ul id="list" class="list bg-white shadow rounded">
		{% if transactions|length > 0 %} {% for transaction in transactions %}
		<li
			class="flex justify-between p-4 border-b {% if transaction.expense_type == 'DEBIT' %} bg-red-100 {% else %} bg-green-100 {% endif %}">
			<span>{{ transaction.description }}</span>
			<span>{{ transaction.amount }}</span>
			<a
				href="{% url 'removeTransaction' transaction.id %}"
				class="delete-btn text-red-600 hover:text-red-800">
				<i class="fa fa-trash" aria-hidden="true"></i>
			</a>
		</li>
		{% endfor %} {% else %}
		<li class="p-4 text-gray-600">
			Currently, you have not made any transactions
		</li>
		{% endif %}
	</ul>

	<h3 class="text-lg font-semibold mt-6">Add New Transaction</h3>

	<form method="POST" id="form" class="mt-4 bg-gray-100 p-4 rounded shadow">
		{% csrf_token %}
		<div class="form-control mb-4">
			<label for="text" class="block mb-2">Description</label>
			<input
				type="text"
				name="description"
				id="text"
				placeholder="Enter description..."
				class="w-full p-2 border border-gray-300 rounded" />
		</div>
		<div class="form-control mb-4">
			<label for="amount" class="block mb-2">
				Amount <br />
				<small class="text-gray-500"
					>(e.g., -100 = expense, 100 = income)</small
				>
			</label>
			<input
				type="number"
				name="amount"
				id="amount"
				placeholder="Enter amount..."
				class="w-full p-2 border border-gray-300 rounded" />
		</div>
		<button
			class="btn bg-blue-500 text-white p-2 rounded hover:bg-blue-600 transition"
			type="submit">
			Add Transaction
		</button>
	</form>
</div>
<!-- Notification -->
<div class="notification-container" id="notification"></div>
{% endblock %}
